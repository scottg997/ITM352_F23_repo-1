<!--
Author: Wendy Huang
Assignment 1
Date: 11/10/2023
Description: My Homepage
-->
<script src="./products_data.js" type="text/javascript"></script>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
    <!--I was told about this useful tool through a friend who has previous experience with using it, and she said it comes in handy-->
    <link rel="stylesheet" href="products_style.css">
    <!--I used Google Fonts specifically Montserrat because it looks nice to me-->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,200;0,300;0,600;0,700;1,600&family=Montserrat:wght@100;200;300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
</head>
<!--Taken from my home.html it is for my navigation menu to still pop up at the beginning of a new page-->

<body>
    <header>
        <a href="#"><img src="img/logo.png" class="logo" alt="my logo"></a>
        <!--This is where my logo goes in my header-->
        <div class="navmenu">
            <a href="home.html">Home</a>
            <a href="products_display.html">Shop</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <div class="cart-icon">
                <a href="invoice.html"><i class="fa-solid fa-bag-shopping"></i></a>
            </div>
        </div>
    </header>
    <!--My Shop-->
    <section class="popular-products" id="popular">
        <!-- Form wrapper -->
        <form id="purchaseForm" action="./purchase" method="POST">
            <!-- Title text -->
            <div class="center-text">
                <h2>Our Most Popular <span>Holiday</span> Nail Sets</h2>
            </div>
            <!-- Container for all products -->
            <div class="products" id="productContainer">
                <script>
                    for (i = 0; i < products.length; i++) {
                        document.write(
                            `<div class="row">
                                <img src="./img/${products[i].image}" alt="${products[i].name}"/>
                                <div class="product-text">
                                    <h4>${products[i].name}</h4>
                                    <p>$${products[i].price}</p>
                                    <div class="qty">
                                    <label id="quantity${i}_label">Sets Desired:</label>
                                    <input type="number" name="quantity${i}" id="quantity${i}" placeholder="0" min="0" max="${products[i].sets_available}" value="0">
                                    </div>
                                </div>
                            </div>
                            `
                        )
                    };
                </script>
            </div>

            <!-- Purchase button -->
            <input type="submit" class="purchase_button" id="purchase_button" value="Purchase">


        </form>
    </section>

    </section>

        <!--Myscript to validate the form/invoice -->
        <script>
            function validateForm() {
                /// Creating variables for IR1 and formValid
                let condition1= false;
                let condition2= true;
                let condition3= true;
                let formValid = true;

                 // Loop through products array
            for (i = 0; i < products.length; i++) {
                // Get values of quantity for each quantity input on the form
                const quantityInput = document.getElementById(`quantity${i}`);
                const quantity = parseInt(quantityInput.value);
    
                // Update Condition 1: Checks if at least 1 quantity is not 0, if it is then condition 1 is satisfied
                if (quantity > 0) {
                    condition1 = true;
                }


                // Update Condition 2: Checks to make sure inputs are non-negative integers.
                // Also fulfills IR2 requirement
                if (quantity < 0) {
                    document.getElementById(`quantity${i}_errors_span`).textContent = 'Please input a non-negative integer.';
                    document.getElementById(`quantity${i}`).style.border = "1px solid red";
                    condition2 = false;
                } else if(isNaN(quantity)){
                    document.getElementById(`quantity${i}_errors_span`).textContent = 'Quantity must be a number!';
                    condition2 = false;
                } else{
                    document.getElementById(`quantity${i}_errors_span`).textContent = `You want ${quantity} sets`;
                }
    
                // Update Condition 3: Check if quantity exceeds available sets for any input
                // Also fulfills IR3 requirement
                if (quantity > products[i].sets_available) {
                    document.getElementById(`quantity${i}_errors_span`).textContent = `We don\'t have ${quantity} sets available.`;
                    document.getElementById(`quantity${i}`).value = products[i].sets_available
                    condition3 = false;
                }
            }
    
            // If any of the conditions are not met, print an alert and set formValid to false 
            // The if statement for condition 1 also fulfills IR4 
            if (!condition1) {
                alert('Please select at least one quantity greater than zero.');
                document.getElementById(`purchase_button`).value = "Please Select Some Items to Purchase";
                formValid = false;
            }else if(!condition2){
                alert('Please check values on the form and make sure they are all non-negative integers.');
                formValid = false;
            }else if(!condition3){
                alert('Quantity selected exceeds available amount of sets for at least 1 input, please try again.');
                formValid = false;
            }
    
            return formValid;
        }
    </script>

    </section>

    <!--Taken from my home.html it's my contact page -->
    <section class="contact">
        <div class="contact-info">
            <div class="first-info">
                <img src="img/logo.png" alt="">
                <h3>Wendy Huang</h3>
                <p>Honolulu, Hawaii</p>
                <p>(808) 206-3329</p>
                <p>wendyh2@hawaii.edu</p>

                <div class="socialmedia-icon">
                    <a href="#"><i class="fa-brands fa-linkedin"></i></a>
                    <a href="#"><i class="fa-brands fa-github"></i></a>
                    <a href="#"><i class="fa-brands fa-youtube"></i></a>
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </section>
    </body>
</html>